<md-toolbar>
    <div class="md-toolbar-tools">
        <h2>
            <span ng-show="status">{{ cluster.identifier }}'s status</span>
            <span ng-hide="status">Loading...</span>
        </h2>
    </div>
</md-toolbar>
<md-content flex id="content" class="card-grid">
    <remote-resource resource-name="status">    
        <md-subheader class="md-primary md-no-sticky">Nodes</md-subheader>
        <md-content class="status-nodes">
            <md-card ng-repeat="node in status.nodes" class="node">
                <md-card-title ng-style="{'background-color': colour_from_node_status(node.status)}">
                    <md-card-title-text>
                        <span class="md-headline node-name">{{ node.name }}</span>
                        <span class="md-subhead">{{ node.status }}</span>
                    </md-card-title-text>
                </md-card-title>
                <md-card-content>
                    <div class="resources-overview">
                        <div class="resource">
                            <div class="resource-title">CPU</div>
                            <div class="resource-container">
                                <div class="resource-value">{{ node.resources.percentOfAvailable.cpu.requests }} %</div>
                                <div class="resource-usage" ng-style="{
                                    'height': node.resources.percentOfAvailable.cpu.requests+'%',
                                    'background-color': colour_from_percents(node.resources.percentOfAvailable.cpu.requests)
                                }"></div>
                            </div>
                        </div>
                        <div class="resource">
                            <div class="resource-title">Mem.</div>
                            <div class="resource-container">
                                <div class="resource-value">{{ node.resources.percentOfAvailable.memory.requests }} %</div>
                                <div class="resource-usage" ng-style="{
                                    'height': node.resources.percentOfAvailable.memory.requests+'%',
                                    'background-color': colour_from_percents(node.resources.percentOfAvailable.memory.requests)
                                }" md-colou></div>
                            </div>
                        </div>
                        <div class="resource">
                            <div class="resource-title">Vol.</div>
                            <div class="resource-container">
                                <div class="resource-value">{{ node.volumesInUse }}</div>
                                <div class="resource-usage">?</div>
                            </div>
                        </div>
                    </div>
                </md-card-content>
            </md-card>
        </md-content>

        <md-subheader class="md-primary md-no-sticky">
            Pods
            <md-button class="md-raised md-primary" ng-click="displayNamespace = !displayNamespace;">Toggle namespaces</md-button>
        </md-subheader>
        <md-content class="status-pods" ng-class="{'display-namespace-name': displayNamespace}">
            <div class="pod-namespace" ng-repeat="(namespace, pods) in status.pods">
                <div class="namespace-name">{{ namespace }}</div>
                <div class="pods">
                    <div ng-repeat="pod in pods"
                         class="pod"
                         ng-style="{'background-color': colour_from_pod(pod)}"
                         title="{{ pod.name }}"
                         ng-click="showPodDetails(namespace, pod)">
                    </div>
                </div>
            </div>
        </md-content>

        <md-subheader class="md-primary md-no-sticky">Raw status</md-subheader>
        <pre>{{ status }}</pre>
    </remote-resource>
</md-content>
